-- RePoz - –°–∫—Ä–∏–ø—Ç —Ç–µ–ª–µ–ø–æ—Ä—Ç–∞—Ü–∏–∏ —Å –ø–µ—Ä–µ–º–µ—â–∞–µ–º—ã–º GUI
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local UserInputService = game:GetService("UserInputService")
local VirtualInputManager = game:GetService("VirtualInputManager")

local player = Players.LocalPlayer
local enabled = false
local targetPlayerName = ""
local ignorePlayerName = ""
local teleportAll = true

-- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–∫–æ—Ä–æ—Å—Ç–∏
local originalWalkSpeed = 16
local originalJumpPower = 50
local customWalkSpeed = 16
local customJumpPower = 50 -- –ë–∞–∑–æ–≤–∞—è –≤—ã—Å–æ—Ç–∞ 50
local moveDirection = Vector3.new(0, 0, 0)
local speedApplied = false
local infiniteJumpEnabled = false

-- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Ñ–∞—Ä–º–∞ NPC
local npcFarmEnabled = false
local CurrentNPCName = "Jotaro Kujo"
local farmPlatform = nil
local platformFollowConnection = nil
local farmConnection = nil
local positionSaveConnection = nil
local foundNPCs = {}
local lastSearchTime = 0
local lastGPressTime = 0
local lastTPressTime = 0
local lastXPressTime = 0
local gKeyPressed = false
local savedPosition = nil
local platformHeight = 30 -- –í—ã—Å–æ—Ç–∞ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã
local returnSpeed = 100 -- –°–∫–æ—Ä–æ—Å—Ç—å –ø–æ–ª–µ—Ç–∞ –ø—Ä–∏ –≤–æ–∑–≤—Ä–∞—Ç–µ
local lastReturnTime = 0 -- –í—Ä–µ–º—è –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –≤–æ–∑–≤—Ä–∞—Ç–∞
local killAllNPCs = true -- –§–ª–∞–≥ –¥–ª—è —É–±–∏–π—Å—Ç–≤–∞ –≤—Å–µ—Ö NPC –∏–ª–∏ –æ–¥–Ω–æ–≥–æ
local selectedNPC = nil -- –í—ã–±—Ä–∞–Ω–Ω—ã–π NPC –¥–ª—è —Ñ–∞—Ä–º–∞
local originalCollision = true -- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏—Å—Ö–æ–¥–Ω–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∫–æ–ª–ª–∏–∑–∏–∏
local currentNPCIndex = 1 -- –¢–µ–∫—É—â–∏–π –∏–Ω–¥–µ–∫—Å –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ NPC
local lastKilledNPCId = nil -- ID –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ —É–±–∏—Ç–æ–≥–æ NPC

print("üöÄ RePoz - –°–∫—Ä–∏–ø—Ç —Ç–µ–ª–µ–ø–æ—Ä—Ç–∞—Ü–∏–∏ –∑–∞–≥—Ä—É–∂–µ–Ω!")

-- –ó–ê–©–ò–¢–ê –û–¢ –ê–ù–¢–ò–ß–ò–¢–ê
local function antiCheatBypass()
    local character = player.Character
    if not character then return end
    
    local humanoid = character:FindFirstChildOfClass("Humanoid")
    if humanoid then
        humanoid.BreakJointsOnDeath = false
        humanoid.RequiresNeck = false
    end
end

player.CharacterAdded:Connect(function(character)
    wait(1)
    antiCheatBypass()
end)

-- –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —á—Ç–æ –∏–≥—Ä–æ–∫ –Ω–µ –≤ —á–∞—Ç–µ
local function isPlayerTyping()
    local playerGui = player:FindFirstChild("PlayerGui")
    if playerGui then
        local chatBar = playerGui:FindFirstChild("Chat") 
        if chatBar then
            local chatFrame = chatBar:FindFirstChild("Frame")
            if chatFrame then
                local chatBox = chatFrame:FindFirstChild("ChatBar")
                if chatBox and chatBox:IsA("TextBox") then
                    return chatBox:IsFocused()
                end
            end
        end
    end
    return false
end

-- –§—É–Ω–∫—Ü–∏—è –ø–ª–æ—Ç–Ω–æ–π —Ç–µ–ª–µ–ø–æ—Ä—Ç–∞—Ü–∏–∏ –≤ –∏–≥—Ä–æ–∫–∞
local function ultraDenseTeleport()
    if not enabled then return end
    
    local myChar = player.Character
    if not myChar then return end
    
    local myHRP = myChar:FindFirstChild("HumanoidRootPart")
    if not myHRP then return end
    
    local myPos = myHRP.Position
    
    if teleportAll then
        for _, otherPlayer in pairs(Players:GetPlayers()) do
            if otherPlayer ~= player then
                if ignorePlayerName ~= "" then
                    local shouldIgnore = string.lower(otherPlayer.Name) == string.lower(ignorePlayerName) or 
                                       string.lower(otherPlayer.DisplayName) == string.lower(ignorePlayerName)
                    if shouldIgnore then
                        continue
                    end
                end
                
                local otherChar = otherPlayer.Character
                if otherChar then
                    local otherHRP = otherChar:FindFirstChild("HumanoidRootPart")
                    if otherHRP then
                        local offset = Vector3.new(math.random(-1, 1), 0, math.random(-1, 1))
                        otherHRP.CFrame = CFrame.new(myPos + offset)
                    end
                end
            end
        end
    else
        if targetPlayerName ~= "" then
            local playersToTeleport = {}
            
            for name in string.gmatch(targetPlayerName, "[^,]+") do
                local trimmedName = string.gsub(name, "^%s*(.-)%s*$", "%1")
                if trimmedName ~= "" then
                    table.insert(playersToTeleport, trimmedName)
                end
            end
            
            for _, targetName in ipairs(playersToTeleport) do
                for _, otherPlayer in pairs(Players:GetPlayers()) do
                    if otherPlayer ~= player then
                        if string.lower(otherPlayer.Name) == string.lower(targetName) or 
                           string.lower(otherPlayer.DisplayName) == string.lower(targetName) then
                            local otherChar = otherPlayer.Character
                            if otherChar then
                                local otherHRP = otherChar:FindFirstChild("HumanoidRootPart")
                                if otherHRP then
                                    local offset = Vector3.new(math.random(-1, 1), 0, math.random(-1, 1))
                                    otherHRP.CFrame = CFrame.new(myPos + offset)
                                end
                            end
                        end
                    end
                end
            end
        end
    end
end

-- –§—É–Ω–∫—Ü–∏—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–∫–æ—Ä–æ—Å—Ç—å—é
local function updateSpeedSystem()
    if not speedApplied then return end
    if isPlayerTyping() then return end
    
    local char = player.Character
    if char and char:FindFirstChild("HumanoidRootPart") then
        local bv = char.HumanoidRootPart:FindFirstChild("RePozSpeed")
        if bv then bv:Destroy() end
        
        if moveDirection.Magnitude > 0 then
            local newBv = Instance.new("BodyVelocity")
            newBv.Name = "RePozSpeed"
            
            local camera = workspace.CurrentCamera
            local cameraCFrame = camera.CFrame
            
            local right = cameraCFrame.RightVector * moveDirection.X
            local forward = cameraCFrame.LookVector * -moveDirection.Z
            local worldDirection = (right + forward) * customWalkSpeed
            
            worldDirection = Vector3.new(worldDirection.X, 0, worldDirection.Z)
            
            newBv.Velocity = worldDirection
            newBv.MaxForce = Vector3.new(40000, 0, 40000)
            newBv.Parent = char.HumanoidRootPart
        end
    end
end

-- BodyVelocity –º–µ—Ç–æ–¥ –¥–ª—è –ø—Ä—ã–∂–∫–∞ (–ò–°–ü–†–ê–í–õ–ï–ù - –Ω–µ —É–ª–µ—Ç–∞–µ—Ç –≤ –Ω–µ–±–æ)
local jumpCooldown = false
local function updateJumpSystem()
    if not speedApplied then return end
    if jumpCooldown then return end
    
    local character = player.Character
    if not character or not character:FindFirstChild("HumanoidRootPart") then return end
    
    local humanoid = character:FindFirstChildOfClass("Humanoid")
    local hrp = character.HumanoidRootPart
    
    if humanoid and humanoid:GetState() == Enum.HumanoidStateType.Jumping then
        -- –ö–î —á—Ç–æ–±—ã –Ω–µ —É–ª–µ—Ç–∞—Ç—å –≤ –Ω–µ–±–æ
        jumpCooldown = true
        
        local existingBv = hrp:FindFirstChild("RePozJump")
        if not existingBv then
            local bv = Instance.new("BodyVelocity")
            bv.Name = "RePozJump"
            bv.Velocity = Vector3.new(0, customJumpPower, 0)
            bv.MaxForce = Vector3.new(0, 50000, 0)
            bv.Parent = hrp
            
            -- –£–¥–∞–ª—è–µ–º —á–µ—Ä–µ–∑ –∫–æ—Ä–æ—Ç–∫–æ–µ –≤—Ä–µ–º—è
            delay(0.2, function()
                if bv and bv.Parent then
                    bv:Destroy()
                end
            end)
        end
        
        -- –°–±—Ä–∞—Å—ã–≤–∞–µ–º –ö–î —á–µ—Ä–µ–∑ 0.5 —Å–µ–∫
        delay(0.5, function()
            jumpCooldown = false
        end)
    end
end

-- –§—É–Ω–∫—Ü–∏—è –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ–≥–æ –ø—Ä—ã–∂–∫–∞ (–ò–°–ü–†–ê–í–õ–ï–ù–ê - –Ω–µ —É–ª–µ—Ç–∞–µ—Ç –≤ –Ω–µ–±–æ)
local infiniteJumpCooldown = false
local function updateInfiniteJump()
    if not infiniteJumpEnabled then return end
    if isPlayerTyping() then return end
    if infiniteJumpCooldown then return end
    
    local character = player.Character
    if not character then return end
    
    local humanoid = character:FindFirstChildOfClass("Humanoid")
    if humanoid and UserInputService:IsKeyDown(Enum.KeyCode.Space) then
        infiniteJumpCooldown = true
        humanoid:ChangeState(Enum.HumanoidStateType.Jumping)
        
        -- –ö–î –¥–ª—è –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ–≥–æ –ø—Ä—ã–∂–∫–∞
        delay(0.3, function()
            infiniteJumpCooldown = false
        end)
    end
end

-- –û—Ç—Å–ª–µ–∂–∏–≤–∞–µ–º –¥–≤–∏–∂–µ–Ω–∏–µ
UserInputService.InputBegan:Connect(function(input)
    if isPlayerTyping() then return end
    
    if input.KeyCode == Enum.KeyCode.W then
        moveDirection = moveDirection + Vector3.new(0, 0, -1)
    elseif input.KeyCode == Enum.KeyCode.S then
        moveDirection = moveDirection + Vector3.new(0, 0, 1)
    elseif input.KeyCode == Enum.KeyCode.A then
        moveDirection = moveDirection + Vector3.new(-1, 0, 0)
    elseif input.KeyCode == Enum.KeyCode.D then
        moveDirection = moveDirection + Vector3.new(1, 0, 0)
    end
end)

UserInputService.InputEnded:Connect(function(input)
    if isPlayerTyping() then return end
    
    if input.KeyCode == Enum.KeyCode.W then
        moveDirection = moveDirection - Vector3.new(0, 0, -1)
    elseif input.KeyCode == Enum.KeyCode.S then
        moveDirection = moveDirection - Vector3.new(0, 0, 1)
    elseif input.KeyCode == Enum.KeyCode.A then
        moveDirection = moveDirection - Vector3.new(-1, 0, 0)
    elseif input.KeyCode == Enum.KeyCode.D then
        moveDirection = moveDirection - Vector3.new(1, 0, 0)
    end
end)

-- ========== NPC FARMER –§–£–ù–ö–¶–ò–ò ==========
print("üéØ NPC Farmer –º–æ–¥—É–ª—å –∑–∞–≥—Ä—É–∂–µ–Ω!")

-- –§—É–Ω–∫—Ü–∏—è –ø–æ–∏—Å–∫–∞ NPC
local function findNPCs(targetName)
    local npcs = {}
    for _, npc in pairs(workspace:GetDescendants()) do
        if npc:IsA("Model") and npc.Name == targetName then
            local humanoid = npc:FindFirstChildOfClass("Humanoid")
            local rootPart = npc:FindFirstChild("HumanoidRootPart")
            
            if humanoid and humanoid.Health > 0 and rootPart then
                table.insert(npcs, {
                    model = npc,
                    humanoid = humanoid,
                    rootPart = rootPart,
                    id = tostring(npc:GetDebugId())
                })
            end
        end
    end
    
    -- –ï—Å–ª–∏ –≤ —Ä–µ–∂–∏–º–µ –æ–¥–Ω–æ–≥–æ NPC, –æ–±–Ω–æ–≤–ª—è–µ–º –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ
    if not killAllNPCs and #npcs > 0 then
        local foundSelected = false
        
        -- –ü—Ä–æ–≤–µ—Ä—è–µ–º, –µ—Å—Ç—å –ª–∏ —Ç–µ–∫—É—â–∏–π –≤—ã–±—Ä–∞–Ω–Ω—ã–π NPC –≤ –Ω–æ–≤–æ–º —Å–ø–∏—Å–∫–µ
        if selectedNPC then
            for i, npcData in ipairs(npcs) do
                if npcData.id == selectedNPC.id then
                    foundSelected = true
                    selectedNPC = npcs[i] -- –û–±–Ω–æ–≤–ª—è–µ–º –¥–∞–Ω–Ω—ã–µ
                    currentNPCIndex = i
                    break
                end
            end
        end
        
        -- –ï—Å–ª–∏ –≤—ã–±—Ä–∞–Ω–Ω—ã–π NPC –Ω–µ –Ω–∞–π–¥–µ–Ω –∏–ª–∏ –µ–≥–æ –Ω–µ –±—ã–ª–æ, –≤—ã–±–∏—Ä–∞–µ–º —Ç–æ–≥–æ –∂–µ, –∫–æ—Ç–æ—Ä–æ–≥–æ —É–±–∏–≤–∞–ª–∏ –¥–æ —ç—Ç–æ–≥–æ
        if not foundSelected then
            if lastKilledNPCId then
                -- –ò—â–µ–º NPC —Å —Ç–∞–∫–∏–º –∂–µ ID –∫–∞–∫ –ø–æ—Å–ª–µ–¥–Ω–∏–π —É–±–∏—Ç—ã–π
                for i, npcData in ipairs(npcs) do
                    if npcData.id == lastKilledNPCId then
                        selectedNPC = npcs[i]
                        currentNPCIndex = i
                        foundSelected = true
                        print("üéØ –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –ø–æ—Å–ª–µ–¥–Ω–∏–π —É–±–∏—Ç—ã–π NPC: " .. getNPCInfo(selectedNPC))
                        break
                    end
                end
            end
            
            -- –ï—Å–ª–∏ –Ω–µ –Ω–∞—à–ª–∏ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ —É–±–∏—Ç–æ–≥–æ, –≤—ã–±–∏—Ä–∞–µ–º –ø–µ—Ä–≤–æ–≥–æ
            if not foundSelected then
                selectedNPC = npcs[1]
                currentNPCIndex = 1
            end
        end
    end
    
    return npcs
end

-- –§—É–Ω–∫—Ü–∏—è –ø–æ–ª—É—á–µ–Ω–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ NPC
local function getNPCInfo(npcData)
    if not npcData then return "–ù–µ—Ç NPC" end
    local health = npcData.humanoid and math.floor(npcData.humanoid.Health) or 0
    local maxHealth = npcData.humanoid and math.floor(npcData.humanoid.MaxHealth) or 0
    return string.format("HP: %d/%d", health, maxHealth)
end

-- –§—É–Ω–∫—Ü–∏—è –≤—ã–±–æ—Ä–∞ —Å–ª–µ–¥—É—é—â–µ–≥–æ NPC
local function selectNextNPC()
    if killAllNPCs then
        print("‚ùå –°–Ω–∞—á–∞–ª–∞ –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç–µ—Å—å –≤ —Ä–µ–∂–∏–º '–û–¥–∏–Ω NPC'")
        return
    end
    
    if #foundNPCs == 0 then
        print("‚ùå –ù–µ—Ç –Ω–∞–π–¥–µ–Ω–Ω—ã—Ö NPC")
        return nil
    end
    
    -- –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º –∏–Ω–¥–µ–∫—Å –∏ –ø—Ä–æ–≤–µ—Ä—è–µ–º –≥—Ä–∞–Ω–∏—Ü—ã
    currentNPCIndex = currentNPCIndex + 1
    if currentNPCIndex > #foundNPCs then
        currentNPCIndex = 1 -- –í–æ–∑–≤—Ä–∞—â–∞–µ–º—Å—è –∫ –ø–µ—Ä–≤–æ–º—É
    end
    
    -- –í—ã–±–∏—Ä–∞–µ–º NPC –ø–æ —Ç–µ–∫—É—â–µ–º—É –∏–Ω–¥–µ–∫—Å—É
    selectedNPC = foundNPCs[currentNPCIndex]
    
    print("‚úÖ –í—ã–±—Ä–∞–Ω NPC " .. currentNPCIndex .. " –∏–∑ " .. #foundNPCs .. ": " .. getNPCInfo(selectedNPC))
    return selectedNPC
end

-- –§—É–Ω–∫—Ü–∏—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –≤—ã–±–æ—Ä–∞ –Ω–æ–≤–æ–≥–æ NPC –ø—Ä–∏ —Å–º–µ—Ä—Ç–∏ —Ç–µ–∫—É—â–µ–≥–æ
local function autoSelectNewNPC()
    if killAllNPCs then return end -- –í —Ä–µ–∂–∏–º–µ "–í—Å–µ NPC" –Ω–µ –Ω—É–∂–Ω–æ –≤—ã–±–∏—Ä–∞—Ç—å
    
    -- –£–¥–∞–ª—è–µ–º –º–µ—Ä—Ç–≤—ã—Ö NPC –∏–∑ —Å–ø–∏—Å–∫–∞
    for i = #foundNPCs, 1, -1 do
        local npcData = foundNPCs[i]
        if not npcData.humanoid or not npcData.humanoid.Health or npcData.humanoid.Health <= 0 then
            -- –°–æ—Ö—Ä–∞–Ω—è–µ–º ID —É–±–∏—Ç–æ–≥–æ NPC
            lastKilledNPCId = npcData.id
            print("üíÄ NPC —É–±–∏—Ç, —Å–æ—Ö—Ä–∞–Ω–µ–Ω ID: " .. lastKilledNPCId)
            table.remove(foundNPCs, i)
        end
    end
    
    -- –ï—Å–ª–∏ –≤—ã–±—Ä–∞–Ω–Ω—ã–π NPC —É–º–µ—Ä –∏–ª–∏ –µ–≥–æ –Ω–µ—Ç
    if not selectedNPC or not selectedNPC.humanoid or not selectedNPC.humanoid.Health or selectedNPC.humanoid.Health <= 0 then
        selectedNPC = nil
        currentNPCIndex = 1
        
        -- –ò—â–µ–º –∂–∏–≤–æ–≥–æ NPC —Å —Ç–∞–∫–∏–º –∂–µ ID –∫–∞–∫ –ø–æ—Å–ª–µ–¥–Ω–∏–π —É–±–∏—Ç—ã–π
        if lastKilledNPCId then
            for i, npcData in ipairs(foundNPCs) do
                if npcData.humanoid and npcData.humanoid.Health and npcData.humanoid.Health > 0 and npcData.id == lastKilledNPCId then
                    selectedNPC = npcData
                    currentNPCIndex = i
                    print("üéØ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–±—Ä–∞–Ω —Ç–æ—Ç –∂–µ NPC (ID: " .. lastKilledNPCId .. "): " .. getNPCInfo(selectedNPC))
                    updateFarmStatus()
                    return
                end
            end
        end
        
        -- –ï—Å–ª–∏ –Ω–µ –Ω–∞—à–ª–∏ NPC —Å —Ç–∞–∫–∏–º –∂–µ ID, –∏—â–µ–º –ª—é–±–æ–≥–æ –∂–∏–≤–æ–≥–æ NPC
        for i, npcData in ipairs(foundNPCs) do
            if npcData.humanoid and npcData.humanoid.Health and npcData.humanoid.Health > 0 then
                selectedNPC = npcData
                currentNPCIndex = i
                print("üéØ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–±—Ä–∞–Ω –Ω–æ–≤—ã–π NPC: " .. getNPCInfo(selectedNPC))
                updateFarmStatus()
                break
            end
        end
        
        -- –ï—Å–ª–∏ –Ω–µ –Ω–∞—à–ª–∏ –∂–∏–≤—ã—Ö NPC
        if not selectedNPC then
            print("‚ùå –ù–µ—Ç –∂–∏–≤—ã—Ö NPC –¥–ª—è –≤—ã–±–æ—Ä–∞")
        end
    end
end

-- –§—É–Ω–∫—Ü–∏—è —Ç–µ–ª–µ–ø–æ—Ä—Ç–∞—Ü–∏–∏ NPC –∫ –∏–≥—Ä–æ–∫—É
local function teleportNPCsToPlayer()
    local character = player.Character
    if not character then return end
    
    local humanoidRootPart = character:FindFirstChild("HumanoidRootPart")
    if not humanoidRootPart then return end
    
    local myPos = humanoidRootPart.Position
    
    -- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–±–∏—Ä–∞–µ–º –Ω–æ–≤–æ–≥–æ NPC –µ—Å–ª–∏ —Ç–µ–∫—É—â–∏–π —É–º–µ—Ä
    autoSelectNewNPC()
    
    if killAllNPCs then
        -- –¢–µ–ª–µ–ø–æ—Ä—Ç–∏—Ä—É–µ–º –≤—Å–µ—Ö –∂–∏–≤—ã—Ö NPC —Å —Ç–∞–∫–∏–º –∏–º–µ–Ω–µ–º
        for i, npcData in pairs(foundNPCs) do
            if npcData.humanoid and npcData.humanoid.Health > 0 and npcData.rootPart then
                npcData.rootPart.CFrame = CFrame.new(myPos)
            else
                -- –ü–æ–º–µ—á–∞–µ–º –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è
                foundNPCs[i] = nil
            end
        end
        
        -- –û—á–∏—â–∞–µ–º nil –∑–Ω–∞—á–µ–Ω–∏—è
        local newFoundNPCs = {}
        for _, npcData in pairs(foundNPCs) do
            if npcData then
                table.insert(newFoundNPCs, npcData)
            end
        end
        foundNPCs = newFoundNPCs
    else
        -- –¢–µ–ª–µ–ø–æ—Ä—Ç–∏—Ä—É–µ–º —Ç–æ–ª—å–∫–æ –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ NPC
        if selectedNPC and selectedNPC.humanoid and selectedNPC.humanoid.Health > 0 and selectedNPC.rootPart then
            selectedNPC.rootPart.CFrame = CFrame.new(myPos)
        else
            -- –ï—Å–ª–∏ –≤—ã–±—Ä–∞–Ω–Ω—ã–π NPC —É–º–µ—Ä, –ø—ã—Ç–∞–µ–º—Å—è –≤—ã–±—Ä–∞—Ç—å –Ω–æ–≤–æ–≥–æ
            autoSelectNewNPC()
        end
    end
end

-- –§—É–Ω–∫—Ü–∏—è –æ—Ç–∫–ª—é—á–µ–Ω–∏—è –∫–æ–ª–ª–∏–∑–∏–∏
local function disableCollision()
    local character = player.Character
    if character then
        -- –°–æ—Ö—Ä–∞–Ω—è–µ–º –∏—Å—Ö–æ–¥–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∫–æ–ª–ª–∏–∑–∏–∏
        for _, part in pairs(character:GetDescendants()) do
            if part:IsA("BasePart") then
                part.CanCollide = false
            end
        end
    end
end

-- –§—É–Ω–∫—Ü–∏—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –∫–æ–ª–ª–∏–∑–∏–∏
local function restoreCollision()
    local character = player.Character
    if character then
        for _, part in pairs(character:GetDescendants()) do
            if part:IsA("BasePart") then
                part.CanCollide = true
            end
        end
    end
end

-- –§—É–Ω–∫—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∏—è –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã –¥–ª—è —Ñ–∞—Ä–º–∞
local function createFarmPlatform()
    local character = player.Character
    if not character then return end
    
    local humanoidRootPart = character:FindFirstChild("HumanoidRootPart")
    if not humanoidRootPart then return end
    
    -- –°–æ—Ö—Ä–∞–Ω—è–µ–º —Ç–µ–∫—É—â—É—é –ø–æ–∑–∏—Ü–∏—é –∏–≥—Ä–æ–∫–∞ (–±–µ–∑ –ø–æ–¥–Ω—è—Ç–∏—è)
    local currentPos = humanoidRootPart.Position
    savedPosition = Vector3.new(currentPos.X, currentPos.Y + platformHeight, currentPos.Z)
    
    -- –£–¥–∞–ª—è–µ–º —Å—Ç–∞—Ä—É—é –ø–ª–∞—Ç—Ñ–æ—Ä–º—É –µ—Å–ª–∏ –µ—Å—Ç—å
    if farmPlatform then
        farmPlatform:Destroy()
        farmPlatform = nil
    end
    
    if platformFollowConnection then
        platformFollowConnection:Disconnect()
        platformFollowConnection = nil
    end
    
    -- –¢–µ–ª–µ–ø–æ—Ä—Ç–∏—Ä—É–µ–º –∏–≥—Ä–æ–∫–∞ –Ω–∞ platformHeight –≤–≤–µ—Ä—Ö
    humanoidRootPart.CFrame = CFrame.new(savedPosition)
    
    -- –û—Ç–∫–ª—é—á–∞–µ–º –∫–æ–ª–ª–∏–∑–∏—é
    disableCollision()
    
    -- –°–æ–∑–¥–∞–µ–º –Ω–µ–≤–∏–¥–∏–º—É—é –ø–ª–∞—Ç—Ñ–æ—Ä–º—É –ü–û–î –∏–≥—Ä–æ–∫–æ–º
    farmPlatform = Instance.new("Part")
    farmPlatform.Name = "FarmPlatform"
    farmPlatform.Size = Vector3.new(20, 1, 20)
    farmPlatform.Position = Vector3.new(savedPosition.X, savedPosition.Y - 5, savedPosition.Z)
    farmPlatform.Anchored = true
    farmPlatform.CanCollide = true
    farmPlatform.Transparency = 1  -- –ü–æ–ª–Ω–æ—Å—Ç—å—é –Ω–µ–≤–∏–¥–∏–º–∞—è
    farmPlatform.Parent = workspace
    
    -- –î–µ–ª–∞–µ–º –ø–ª–∞—Ç—Ñ–æ—Ä–º—É –ø–µ—Ä–µ–º–µ—â–∞–µ–º–æ–π –∑–∞ –∏–≥—Ä–æ–∫–æ–º
    platformFollowConnection = RunService.Heartbeat:Connect(function()
        if farmPlatform and farmPlatform.Parent and npcFarmEnabled then
            local character = player.Character
            if character and character:FindFirstChild("HumanoidRootPart") then
                local hrp = character.HumanoidRootPart
                -- –ü–ª–∞—Ç—Ñ–æ—Ä–º–∞ —Å–ª–µ–¥—É–µ—Ç –∑–∞ –∏–≥—Ä–æ–∫–æ–º –ø–æ X –∏ Z, –Ω–æ –æ—Å—Ç–∞–µ—Ç—Å—è –Ω–∞ —Å–≤–æ–µ–π –≤—ã—Å–æ—Ç–µ
                farmPlatform.Position = Vector3.new(hrp.Position.X, savedPosition.Y - 5, hrp.Position.Z)
            end
        else
            if platformFollowConnection then
                platformFollowConnection:Disconnect()
            end
        end
    end)
    
    print("üîº –ü–æ–¥–Ω—è—Ç –Ω–∞ " .. platformHeight .. " –µ–¥–∏–Ω–∏—Ü –≤–≤–µ—Ä—Ö")
    print("üíæ –ü–æ–∑–∏—Ü–∏—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞: " .. tostring(savedPosition))
    print("üö´ –ö–æ–ª–ª–∏–∑–∏—è –æ—Ç–∫–ª—é—á–µ–Ω–∞")
end

-- –£–ª—É—á—à–µ–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –∞–≤—Ç–æ-–≤–æ–∑–≤—Ä–∞—Ç–∞ –±–µ–∑ —Ç–µ–ª–µ–ø–æ—Ä—Ç–∞—Ü–∏–∏
local function smoothReturnToPosition()
    if not savedPosition or not player.Character or not player.Character:FindFirstChild("HumanoidRootPart") then 
        return 
    end
    
    local hrp = player.Character.HumanoidRootPart
    local currentPos = hrp.Position
    
    -- –ï—Å–ª–∏ —É–∂–µ –Ω–∞ –ø–æ–∑–∏—Ü–∏–∏ (–≤ —Ä–∞–¥–∏—É—Å–µ 3 –µ–¥–∏–Ω–∏—Ü), –Ω–µ –¥–µ–ª–∞–µ–º –Ω–∏—á–µ–≥–æ
    if (currentPos - savedPosition).Magnitude < 3 then
        return
    end
    
    -- –£–¥–∞–ª—è–µ–º —Å—Ç–∞—Ä—ã–µ —Å–∏–ª—ã –µ—Å–ª–∏ –µ—Å—Ç—å
    local oldVelocity = hrp:FindFirstChild("AutoReturnFly")
    if oldVelocity then
        oldVelocity:Destroy()
    end
    
    local oldForce = hrp:FindFirstChild("AutoReturnForce")
    if oldForce then
        oldForce:Destroy()
    end
    
    -- –ò—Å–ø–æ–ª—å–∑—É–µ–º BodyPosition –¥–ª—è —Ç–æ—á–Ω–æ–≥–æ –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
    local bodyPosition = Instance.new("BodyPosition")
    bodyPosition.Name = "AutoReturnFly"
    bodyPosition.Position = savedPosition
    bodyPosition.MaxForce = Vector3.new(40000, 40000, 40000)
    bodyPosition.P = 5000 -- –í—ã—Å–æ–∫–∞—è —Ç–æ—á–Ω–æ—Å—Ç—å
    bodyPosition.D = 500 -- –î–µ–º–ø—Ñ–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –ø–ª–∞–≤–Ω–æ—Å—Ç–∏
    bodyPosition.Parent = hrp
    
    -- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ –ø—Ä–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–∏ —Ü–µ–ª–∏
    spawn(function()
        local startTime = tick()
        while tick() - startTime < 2 do -- –ú–∞–∫—Å–∏–º—É–º 2 —Å–µ–∫—É–Ω–¥—ã
            if not hrp or not hrp.Parent or not bodyPosition or not bodyPosition.Parent then
                break
            end
            
            local currentDistance = (savedPosition - hrp.Position).Magnitude
            
            -- –ï—Å–ª–∏ –±–ª–∏–∑–∫–æ –∫ —Ü–µ–ª–∏, –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º—Å—è
            if currentDistance < 2 then
                bodyPosition:Destroy()
                break
            end
            
            wait(0.1)
        end
        
        -- –°—Ç—Ä–∞—Ö–æ–≤–∫–∞ - —É–¥–∞–ª—è–µ–º –µ—Å–ª–∏ –≤—Å–µ –µ—â–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
        if bodyPosition and bodyPosition.Parent then
            bodyPosition:Destroy()
        end
    end)
end

-- –§—É–Ω–∫—Ü–∏—è —É–¥–∞–ª–µ–Ω–∏—è –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã
local function removeFarmPlatform()
    if farmPlatform then
        farmPlatform:Destroy()
        farmPlatform = nil
    end
    
    if platformFollowConnection then
        platformFollowConnection:Disconnect()
        platformFollowConnection = nil
    end
    
    if positionSaveConnection then
        positionSaveConnection:Disconnect()
        positionSaveConnection = nil
    end
    
    -- –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∫–æ–ª–ª–∏–∑–∏—é
    restoreCollision()
    
    -- –£–¥–∞–ª—è–µ–º BodyVelocity –µ—Å–ª–∏ –µ—Å—Ç—å
    local character = player.Character
    if character and character:FindFirstChild("HumanoidRootPart") then
        local hrp = character.HumanoidRootPart
        local flyVelocity = hrp:FindFirstChild("AutoReturnFly")
        if flyVelocity then
            flyVelocity:Destroy()
        end
    end
    
    savedPosition = nil
    selectedNPC = nil
    currentNPCIndex = 1
    lastKilledNPCId = nil -- –°–±—Ä–∞—Å—ã–≤–∞–µ–º ID —É–±–∏—Ç–æ–≥–æ NPC
    print("üóëÔ∏è –ü–ª–∞—Ç—Ñ–æ—Ä–º–∞ –∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω–∞—è –ø–æ–∑–∏—Ü–∏—è —É–¥–∞–ª–µ–Ω—ã")
    print("‚úÖ –ö–æ–ª–ª–∏–∑–∏—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞")
end

-- –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Å–∏–º—É–ª—è—Ü–∏–∏ –Ω–∞–∂–∞—Ç–∏—è –∫–ª–∞–≤–∏—à
local function simulateKeyPress(keyCode, duration)
    if not npcFarmEnabled then return end
    
    VirtualInputManager:SendKeyEvent(true, keyCode, false, nil)
    
    if duration then
        delay(duration, function()
            if npcFarmEnabled then
                VirtualInputManager:SendKeyEvent(false, keyCode, false, nil)
            end
        end)
    else
        VirtualInputManager:SendKeyEvent(false, keyCode, false, nil)
    end
end

-- –§—É–Ω–∫—Ü–∏—è –∞–≤—Ç–æ-–Ω–∞–∂–∞—Ç–∏—è –∫–ª–∞–≤–∏—à (G –Ω–∞ 3 —Å–µ–∫—É–Ω–¥—ã –∫–∞–∂–¥—ã–µ 25 —Å–µ–∫—É–Ω–¥, T –∏ X –∫–∞–∂–¥—É—é —Å–µ–∫—É–Ω–¥—É)
local function handleAutoKeys()
    if not npcFarmEnabled then return end
    
    local currentTime = tick()
    
    -- –ù–∞–∂–∞—Ç–∏–µ G –Ω–∞ 3 —Å–µ–∫—É–Ω–¥—ã –∫–∞–∂–¥—ã–µ 25 —Å–µ–∫—É–Ω–¥
    if currentTime - lastGPressTime >= 25 then
        print("üîí –ù–∞–∂–∏–º–∞—é G –Ω–∞ 3 —Å–µ–∫—É–Ω–¥—ã...")
        gKeyPressed = true
        simulateKeyPress(Enum.KeyCode.G, 3)
        lastGPressTime = currentTime
        
        delay(3, function()
            gKeyPressed = false
        end)
    end
    
    -- –ù–∞–∂–∞—Ç–∏–µ T –∫–∞–∂–¥—É—é —Å–µ–∫—É–Ω–¥—É (–µ—Å–ª–∏ G –Ω–µ –Ω–∞–∂–∞—Ç–∞)
    if currentTime - lastTPressTime >= 1 and not gKeyPressed then
        simulateKeyPress(Enum.KeyCode.T, 0.1)
        lastTPressTime = currentTime
    end
    
    -- –ù–∞–∂–∞—Ç–∏–µ X –∫–∞–∂–¥—É—é —Å–µ–∫—É–Ω–¥—É (–µ—Å–ª–∏ G –Ω–µ –Ω–∞–∂–∞—Ç–∞)
    if currentTime - lastXPressTime >= 1 and not gKeyPressed then
        simulateKeyPress(Enum.KeyCode.X, 0.1)
        lastXPressTime = currentTime
    end
end

-- ========== –°–û–ó–î–ê–ù–ò–ï GUI ==========
local screenGui = Instance.new("ScreenGui")
screenGui.Name = "RePozGUI"
screenGui.ResetOnSpawn = false
screenGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling

local mainFrame = Instance.new("Frame")
mainFrame.Size = UDim2.new(0, 350, 0, 350)
mainFrame.Position = UDim2.new(0, 10, 0, 10)
mainFrame.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
mainFrame.BorderSizePixel = 0
mainFrame.Active = true
mainFrame.Draggable = true
mainFrame.ZIndex = 1
mainFrame.Parent = screenGui

local corner = Instance.new("UICorner")
corner.CornerRadius = UDim.new(0, 8)
corner.Parent = mainFrame

-- –ó–∞–≥–æ–ª–æ–≤–æ–∫
local titleBar = Instance.new("Frame")
titleBar.Size = UDim2.new(1, 0, 0, 30)
titleBar.Position = UDim2.new(0, 0, 0, 0)
titleBar.BackgroundColor3 = Color3.fromRGB(60, 60, 60)
titleBar.ZIndex = 2
titleBar.Parent = mainFrame

local titleText = Instance.new("TextLabel")
titleText.Size = UDim2.new(0.7, 0, 1, 0)
titleText.Position = UDim2.new(0, 5, 0, 0)
titleText.BackgroundTransparency = 1
titleText.Text = "üîß RePoz v3.0"
titleText.TextColor3 = Color3.fromRGB(255, 255, 255)
titleText.Font = Enum.Font.GothamBold
titleText.TextSize = 14
titleText.TextXAlignment = Enum.TextXAlignment.Left
titleText.ZIndex = 3
titleText.Parent = titleBar

-- –ö–Ω–æ–ø–∫–∞ –∑–∞–∫—Ä—ã—Ç–∏—è
local closeButton = Instance.new("TextButton")
closeButton.Size = UDim2.new(0, 20, 0, 20)
closeButton.Position = UDim2.new(1, -25, 0, 5)
closeButton.BackgroundColor3 = Color3.fromRGB(244, 67, 54)
closeButton.TextColor3 = Color3.fromRGB(255, 255, 255)
closeButton.Font = Enum.Font.GothamBold
closeButton.TextSize = 12
closeButton.Text = "X"
closeButton.ZIndex = 3
closeButton.Parent = titleBar

-- –í–∫–ª–∞–¥–∫–∏
local tabsFrame = Instance.new("Frame")
tabsFrame.Size = UDim2.new(1, 0, 0, 25)
tabsFrame.Position = UDim2.new(0, 0, 0, 30)
tabsFrame.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
tabsFrame.BorderSizePixel = 0
tabsFrame.ZIndex = 2
tabsFrame.Parent = mainFrame

local teleportTab = Instance.new("TextButton")
teleportTab.Size = UDim2.new(0.33, 0, 1, 0)
teleportTab.Position = UDim2.new(0, 0, 0, 0)
teleportTab.BackgroundColor3 = Color3.fromRGB(70, 70, 70)
teleportTab.TextColor3 = Color3.fromRGB(255, 255, 255)
teleportTab.Font = Enum.Font.GothamBold
teleportTab.TextSize = 11
teleportTab.Text = "üì° –¢–µ–ª–µ–ø–æ—Ä—Ç"
teleportTab.ZIndex = 3
teleportTab.Parent = tabsFrame

local speedTab = Instance.new("TextButton")
speedTab.Size = UDim2.new(0.33, 0, 1, 0)
speedTab.Position = UDim2.new(0.33, 0, 0, 0)
speedTab.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
speedTab.TextColor3 = Color3.fromRGB(200, 200, 200)
speedTab.Font = Enum.Font.GothamBold
speedTab.TextSize = 11
speedTab.Text = "‚ö° –°–∫–æ—Ä–æ—Å—Ç—å"
speedTab.ZIndex = 3
speedTab.Parent = tabsFrame

local farmTab = Instance.new("TextButton")
farmTab.Size = UDim2.new(0.34, 0, 1, 0)
farmTab.Position = UDim2.new(0.66, 0, 0, 0)
farmTab.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
farmTab.TextColor3 = Color3.fromRGB(200, 200, 200)
farmTab.Font = Enum.Font.GothamBold
farmTab.TextSize = 11
farmTab.Text = "üåæ –§–∞—Ä–º"
farmTab.ZIndex = 3
farmTab.Parent = tabsFrame

-- –ö–æ–Ω—Ç–µ–Ω—Ç —Ç–µ–ª–µ–ø–æ—Ä—Ç–∞
local teleportContent = Instance.new("Frame")
teleportContent.Size = UDim2.new(1, 0, 1, -55)
teleportContent.Position = UDim2.new(0, 0, 0, 55)
teleportContent.BackgroundTransparency = 1
teleportContent.Visible = true
teleportContent.ZIndex = 2
teleportContent.Parent = mainFrame

-- –ö–æ–Ω—Ç–µ–Ω—Ç —Å–∫–æ—Ä–æ—Å—Ç–∏
local speedContent = Instance.new("Frame")
speedContent.Size = UDim2.new(1, 0, 1, -55)
speedContent.Position = UDim2.new(0, 0, 0, 55)
speedContent.BackgroundTransparency = 1
speedContent.Visible = false
speedContent.ZIndex = 2
speedContent.Parent = mainFrame

-- –ö–æ–Ω—Ç–µ–Ω—Ç —Ñ–∞—Ä–º–∞
local farmContent = Instance.new("Frame")
farmContent.Size = UDim2.new(1, 0, 1, -55)
farmContent.Position = UDim2.new(0, 0, 0, 55)
farmContent.BackgroundTransparency = 1
farmContent.Visible = false
farmContent.ZIndex = 2
farmContent.Parent = mainFrame

-- === –¢–ï–õ–ï–ü–û–†–¢ –í–ö–õ–ê–î–ö–ê ===
local searchBox = Instance.new("TextBox")
searchBox.Size = UDim2.new(0.8, 0, 0, 20)
searchBox.Position = UDim2.new(0.1, 0, 0.1, 0)
searchBox.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
searchBox.TextColor3 = Color3.fromRGB(255, 255, 255)
searchBox.Font = Enum.Font.Gotham
searchBox.TextSize = 10
searchBox.PlaceholderText = "–ù–∏–∫ —Ü–µ–ª–∏ (—á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é)"
searchBox.ZIndex = 2
searchBox.Parent = teleportContent

local ignoreBox = Instance.new("TextBox")
ignoreBox.Size = UDim2.new(0.8, 0, 0, 20)
ignoreBox.Position = UDim2.new(0.1, 0, 0.25, 0)
ignoreBox.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
ignoreBox.TextColor3 = Color3.fromRGB(255, 255, 255)
ignoreBox.Font = Enum.Font.Gotham
ignoreBox.TextSize = 10
ignoreBox.PlaceholderText = "–ù–µ —Ç–µ–ª–µ–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å (—á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é)"
ignoreBox.ZIndex = 2
ignoreBox.Parent = teleportContent

local button = Instance.new("TextButton")
button.Size = UDim2.new(0.8, 0, 0, 35)
button.Position = UDim2.new(0.1, 0, 0.45, 0)
button.BackgroundColor3 = Color3.fromRGB(76, 175, 80)
button.Text = "–í–ö–õ –¢–µ–ª–µ–ø–æ—Ä—Ç –í–°–ï–•"
button.TextColor3 = Color3.fromRGB(255, 255, 255)
button.Font = Enum.Font.GothamBold
button.TextSize = 12
button.ZIndex = 2
button.Parent = teleportContent

local statusLabel = Instance.new("TextLabel")
statusLabel.Size = UDim2.new(0.8, 0, 0, 20)
statusLabel.Position = UDim2.new(0.1, 0, 0.65, 0)
statusLabel.BackgroundTransparency = 1
statusLabel.Text = "–†–µ–∂–∏–º: –í—Å–µ –∏–≥—Ä–æ–∫–∏"
statusLabel.TextColor3 = Color3.fromRGB(200, 200, 200)
statusLabel.Font = Enum.Font.Gotham
statusLabel.TextSize = 9
statusLabel.ZIndex = 2
statusLabel.Parent = teleportContent

-- === –°–ö–û–†–û–°–¢–¨ –í–ö–õ–ê–î–ö–ê ===
local speedLabel = Instance.new("TextLabel")
speedLabel.Size = UDim2.new(0.8, 0, 0, 20)
speedLabel.Position = UDim2.new(0.1, 0, 0.1, 0)
speedLabel.BackgroundTransparency = 1
speedLabel.Text = "–°–∫–æ—Ä–æ—Å—Ç—å –±–µ–≥–∞: " .. originalWalkSpeed
speedLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
speedLabel.Font = Enum.Font.Gotham
speedLabel.TextSize = 12
speedLabel.TextXAlignment = Enum.TextXAlignment.Left
speedLabel.ZIndex = 2
speedLabel.Parent = speedContent

local speedBox = Instance.new("TextBox")
speedBox.Size = UDim2.new(0.6, 0, 0, 20)
speedBox.Position = UDim2.new(0.1, 0, 0.2, 0)
speedBox.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
speedBox.TextColor3 = Color3.fromRGB(255, 255, 255)
speedBox.Font = Enum.Font.Gotham
speedBox.TextSize = 12
speedBox.Text = tostring(originalWalkSpeed)
speedBox.PlaceholderText = "–°–∫–æ—Ä–æ—Å—Ç—å"
speedBox.ZIndex = 2
speedBox.Parent = speedContent

local jumpLabel = Instance.new("TextLabel")
jumpLabel.Size = UDim2.new(0.8, 0, 0, 20)
jumpLabel.Position = UDim2.new(0.1, 0, 0.35, 0)
jumpLabel.BackgroundTransparency = 1
jumpLabel.Text = "–í—ã—Å–æ—Ç–∞ –ø—Ä—ã–∂–∫–∞: " .. customJumpPower
jumpLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
jumpLabel.Font = Enum.Font.Gotham
jumpLabel.TextSize = 12
jumpLabel.TextXAlignment = Enum.TextXAlignment.Left
jumpLabel.ZIndex = 2
jumpLabel.Parent = speedContent

local jumpBox = Instance.new("TextBox")
jumpBox.Size = UDim2.new(0.6, 0, 0, 20)
jumpBox.Position = UDim2.new(0.1, 0, 0.45, 0)
jumpBox.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
jumpBox.TextColor3 = Color3.fromRGB(255, 255, 255)
jumpBox.Font = Enum.Font.Gotham
jumpBox.TextSize = 12
jumpBox.Text = tostring(customJumpPower)
jumpBox.PlaceholderText = "–ü—Ä—ã–∂–æ–∫"
jumpBox.ZIndex = 2
jumpBox.Parent = speedContent

-- –ö–Ω–æ–ø–∫–∞ –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ–≥–æ –ø—Ä—ã–∂–∫–∞
local infiniteJumpButton = Instance.new("TextButton")
infiniteJumpButton.Size = UDim2.new(0.8, 0, 0, 25)
infiniteJumpButton.Position = UDim2.new(0.1, 0, 0.6, 0)
infiniteJumpButton.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
infiniteJumpButton.TextColor3 = Color3.fromRGB(255, 255, 255)
infiniteJumpButton.Font = Enum.Font.GothamBold
infiniteJumpButton.TextSize = 11
infiniteJumpButton.Text = "–í–ö–õ –ë–µ—Å–∫–æ–Ω–µ—á–Ω—ã–π –ø—Ä—ã–∂–æ–∫"
infiniteJumpButton.ZIndex = 2
infiniteJumpButton.Parent = speedContent

local applySpeedButton = Instance.new("TextButton")
applySpeedButton.Size = UDim2.new(0.8, 0, 0, 25)
applySpeedButton.Position = UDim2.new(0.1, 0, 0.75, 0)
applySpeedButton.BackgroundColor3 = Color3.fromRGB(76, 175, 80)
applySpeedButton.TextColor3 = Color3.fromRGB(255, 255, 255)
applySpeedButton.Font = Enum.Font.GothamBold
applySpeedButton.TextSize = 11
applySpeedButton.Text = "–ü—Ä–∏–º–µ–Ω–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏"
applySpeedButton.ZIndex = 2
applySpeedButton.Parent = speedContent

-- === –§–ê–†–ú –í–ö–õ–ê–î–ö–ê ===
-- –ü–æ–ª–µ –≤–≤–æ–¥–∞ NPC
local npcInputLabel = Instance.new("TextLabel")
npcInputLabel.Size = UDim2.new(0.8, 0, 0, 20)
npcInputLabel.Position = UDim2.new(0.1, 0, 0.05, 0)
npcInputLabel.BackgroundTransparency = 1
npcInputLabel.Text = "–ò–º—è NPC:"
npcInputLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
npcInputLabel.Font = Enum.Font.Gotham
npcInputLabel.TextSize = 11
npcInputLabel.TextXAlignment = Enum.TextXAlignment.Left
npcInputLabel.ZIndex = 2
npcInputLabel.Parent = farmContent

local npcSearchBox = Instance.new("TextBox")
npcSearchBox.Size = UDim2.new(0.8, 0, 0, 25)
npcSearchBox.Position = UDim2.new(0.1, 0, 0.15, 0)
npcSearchBox.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
npcSearchBox.TextColor3 = Color3.fromRGB(255, 255, 255)
npcSearchBox.Font = Enum.Font.Gotham
npcSearchBox.TextSize = 11
npcSearchBox.PlaceholderText = "Jotaro Kujo, Dio Brando..."
npcSearchBox.Text = CurrentNPCName
npcSearchBox.ZIndex = 2
npcSearchBox.Parent = farmContent

-- –ö–Ω–æ–ø–∫–∞ –≤—ã–±–æ—Ä–∞ —Ä–µ–∂–∏–º–∞ —Ñ–∞—Ä–º–∞
local farmModeButton = Instance.new("TextButton")
farmModeButton.Size = UDim2.new(0.8, 0, 0, 25)
farmModeButton.Position = UDim2.new(0.1, 0, 0.4, 0)
farmModeButton.BackgroundColor3 = Color3.fromRGB(76, 175, 80)
farmModeButton.TextColor3 = Color3.fromRGB(255, 255, 255)
farmModeButton.Font = Enum.Font.GothamBold
farmModeButton.TextSize = 11
farmModeButton.Text = "–†–µ–∂–∏–º: –í—Å–µ NPC"
farmModeButton.ZIndex = 2
farmModeButton.Parent = farmContent

-- –ö–Ω–æ–ø–∫–∞ –≤—ã–±–æ—Ä–∞ —Å–ª–µ–¥—É—é—â–µ–≥–æ NPC
local selectNPCButton = Instance.new("TextButton")
selectNPCButton.Size = UDim2.new(0.8, 0, 0, 25)
selectNPCButton.Position = UDim2.new(0.1, 0, 0.55, 0)
selectNPCButton.BackgroundColor3 = Color3.fromRGB(33, 150, 243)
selectNPCButton.TextColor3 = Color3.fromRGB(255, 255, 255)
selectNPCButton.Font = Enum.Font.GothamBold
selectNPCButton.TextSize = 11
selectNPCButton.Text = "–°–ª–µ–¥—É—é—â–∏–π NPC"
selectNPCButton.ZIndex = 2
selectNPCButton.Parent = farmContent

-- –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–∫–æ—Ä–æ—Å—Ç–∏ –≤–æ–∑–≤—Ä–∞—Ç–∞
local returnSpeedLabel = Instance.new("TextLabel")
returnSpeedLabel.Size = UDim2.new(0.8, 0, 0, 20)
returnSpeedLabel.Position = UDim2.new(0.1, 0, 0.7, 0)
returnSpeedLabel.BackgroundTransparency = 1
returnSpeedLabel.Text = "–°–∫–æ—Ä–æ—Å—Ç—å –≤–æ–∑–≤—Ä–∞—Ç–∞: " .. returnSpeed
returnSpeedLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
returnSpeedLabel.Font = Enum.Font.Gotham
returnSpeedLabel.TextSize = 11
returnSpeedLabel.TextXAlignment = Enum.TextXAlignment.Left
returnSpeedLabel.ZIndex = 2
returnSpeedLabel.Parent = farmContent

local returnSpeedBox = Instance.new("TextBox")
returnSpeedBox.Size = UDim2.new(0.6, 0, 0, 20)
returnSpeedBox.Position = UDim2.new(0.1, 0, 0.8, 0)
returnSpeedBox.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
returnSpeedBox.TextColor3 = Color3.fromRGB(255, 255, 255)
returnSpeedBox.Font = Enum.Font.Gotham
returnSpeedBox.TextSize = 11
returnSpeedBox.Text = tostring(returnSpeed)
returnSpeedBox.PlaceholderText = "–°–∫–æ—Ä–æ—Å—Ç—å –ø–æ–ª–µ—Ç–∞"
returnSpeedBox.ZIndex = 2
returnSpeedBox.Parent = farmContent

-- –ö–Ω–æ–ø–∫–∞ —Å—Ç–∞—Ä—Ç–∞/—Å—Ç–æ–ø–∞ —Ñ–∞—Ä–º–∞
local farmButton = Instance.new("TextButton")
farmButton.Size = UDim2.new(0.8, 0, 0, 35)
farmButton.Position = UDim2.new(0.1, 0, 0.9, 0)
farmButton.BackgroundColor3 = Color3.fromRGB(76, 175, 80)
farmButton.TextColor3 = Color3.fromRGB(255, 255, 255)
farmButton.Font = Enum.Font.GothamBold
farmButton.TextSize = 12
farmButton.Text = "üöÄ –ù–ê–ß–ê–¢–¨ –§–ê–†–ú"
farmButton.ZIndex = 2
farmButton.Parent = farmContent

-- –°—Ç–∞—Ç—É—Å —Ñ–∞—Ä–º–∞
local farmStatusLabel = Instance.new("TextLabel")
farmStatusLabel.Size = UDim2.new(0.8, 0, 0, 40)
farmStatusLabel.Position = UDim2.new(0.1, 0, 1.05, 0)
farmStatusLabel.BackgroundTransparency = 1
farmStatusLabel.Text = "–°—Ç–∞—Ç—É—Å: –í—ã–∫–ª—é—á–µ–Ω–æ\n–ö–æ–ª–ª–∏–∑–∏—è: –í–∫–ª | –†–µ–∂–∏–º: –í—Å–µ"
farmStatusLabel.TextColor3 = Color3.fromRGB(200, 200, 200)
farmStatusLabel.Font = Enum.Font.Gotham
farmStatusLabel.TextSize = 9
farmStatusLabel.TextXAlignment = Enum.TextXAlignment.Center
farmStatusLabel.ZIndex = 2
farmStatusLabel.Parent = farmContent

-- –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏
searchBox:GetPropertyChangedSignal("Text"):Connect(function()
    if searchBox.Text == "" then
        teleportAll = true
        targetPlayerName = ""
        button.Text = "–í–ö–õ –¢–µ–ª–µ–ø–æ—Ä—Ç –í–°–ï–•"
    else
        teleportAll = false
        targetPlayerName = searchBox.Text
        button.Text = "–í–ö–õ –¢–µ–ª–µ–ø–æ—Ä—Ç –í–´–ë–†–ê–ù–ù–´–•"
    end
    statusLabel.Text = "–¶–µ–ª—å: " .. (targetPlayerName == "" and "–í—Å–µ" or targetPlayerName)
end)

ignoreBox:GetPropertyChangedSignal("Text"):Connect(function()
    ignorePlayerName = ignoreBox.Text
end)

button.MouseButton1Click:Connect(function()
    enabled = not enabled
    if enabled then
        button.Text = "–í–´–ö–õ –¢–µ–ª–µ–ø–æ—Ä—Ç " .. (teleportAll and "–í–°–ï–•" or "–í–´–ë–†–ê–ù–ù–´–•")
        button.BackgroundColor3 = Color3.fromRGB(244, 67, 54)
    else
        button.Text = "–í–ö–õ –¢–µ–ª–µ–ø–æ—Ä—Ç " .. (teleportAll and "–í–°–ï–•" or "–í–´–ë–†–ê–ù–ù–´–•")
        button.BackgroundColor3 = Color3.fromRGB(76, 175, 80)
    end
end)

-- –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –≤–∫–ª–∞–¥–æ–∫
teleportTab.MouseButton1Click:Connect(function()
    teleportContent.Visible = true
    speedContent.Visible = false
    farmContent.Visible = false
    teleportTab.BackgroundColor3 = Color3.fromRGB(70, 70, 70)
    speedTab.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
    farmTab.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
end)

speedTab.MouseButton1Click:Connect(function()
    teleportContent.Visible = false
    speedContent.Visible = true
    farmContent.Visible = false
    teleportTab.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
    speedTab.BackgroundColor3 = Color3.fromRGB(70, 70, 70)
    farmTab.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
end)

farmTab.MouseButton1Click:Connect(function()
    teleportContent.Visible = false
    speedContent.Visible = false
    farmContent.Visible = true
    teleportTab.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
    speedTab.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
    farmTab.BackgroundColor3 = Color3.fromRGB(70, 70, 70)
end)

-- –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ–≥–æ –ø—Ä—ã–∂–∫–∞
infiniteJumpButton.MouseButton1Click:Connect(function()
    infiniteJumpEnabled = not infiniteJumpEnabled
    if infiniteJumpEnabled then
        infiniteJumpButton.Text = "–í–´–ö–õ –ë–µ—Å–∫–æ–Ω–µ—á–Ω—ã–π –ø—Ä—ã–∂–æ–∫"
        infiniteJumpButton.BackgroundColor3 = Color3.fromRGB(244, 67, 54)
        print("‚úÖ –ë–µ—Å–∫–æ–Ω–µ—á–Ω—ã–π –ø—Ä—ã–∂–æ–∫ –í–ö–õ")
    else
        infiniteJumpButton.Text = "–í–ö–õ –ë–µ—Å–∫–æ–Ω–µ—á–Ω—ã–π –ø—Ä—ã–∂–æ–∫"
        infiniteJumpButton.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
        print("‚ùå –ë–µ—Å–∫–æ–Ω–µ—á–Ω—ã–π –ø—Ä—ã–∂–æ–∫ –í–´–ö–õ")
    end
end)

applySpeedButton.MouseButton1Click:Connect(function()
    local newSpeed = tonumber(speedBox.Text)
    local newJump = tonumber(jumpBox.Text)
    
    if newSpeed then
        customWalkSpeed = newSpeed
        speedLabel.Text = "–°–∫–æ—Ä–æ—Å—Ç—å –±–µ–≥–∞: " .. newSpeed
    end
    
    if newJump then
        customJumpPower = newJump
        jumpLabel.Text = "–í—ã—Å–æ—Ç–∞ –ø—Ä—ã–∂–∫–∞: " .. newJump
        print("‚úÖ –í—ã—Å–æ—Ç–∞ –ø—Ä—ã–∂–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞: " .. newJump)
    end
    
    speedApplied = true
    print("‚úÖ –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–∏–º–µ–Ω–µ–Ω—ã! –°–∫–æ—Ä–æ—Å—Ç—å: " .. (newSpeed or customWalkSpeed) .. ", –ü—Ä—ã–∂–æ–∫: " .. (newJump or customJumpPower))
end)

-- –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å–∫–æ—Ä–æ—Å—Ç–∏ –≤–æ–∑–≤—Ä–∞—Ç–∞
returnSpeedBox:GetPropertyChangedSignal("Text"):Connect(function()
    local newSpeed = tonumber(returnSpeedBox.Text)
    if newSpeed and newSpeed > 0 then
        returnSpeed = newSpeed
        returnSpeedLabel.Text = "–°–∫–æ—Ä–æ—Å—Ç—å –≤–æ–∑–≤—Ä–∞—Ç–∞: " .. returnSpeed
        updateFarmStatus()
        print("‚úÖ –°–∫–æ—Ä–æ—Å—Ç—å –≤–æ–∑–≤—Ä–∞—Ç–∞ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞: " .. returnSpeed)
    end
end)

-- –§—É–Ω–∫—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å—Ç–∞—Ç—É—Å–∞ —Ñ–∞—Ä–º–∞
local function updateFarmStatus()
    local statusText = "–°—Ç–∞—Ç—É—Å: " .. (npcFarmEnabled and "–§–∞—Ä–º–∏–º " .. CurrentNPCName or "–í—ã–∫–ª—é—á–µ–Ω–æ")
    statusText = statusText .. "\n–ö–æ–ª–ª–∏–∑–∏—è: " .. (npcFarmEnabled and "–í—ã–∫–ª" or "–í–∫–ª")
    statusText = statusText .. " | –†–µ–∂–∏–º: " .. (killAllNPCs and "–í—Å–µ" or "–û–¥–∏–Ω")
    
    if not killAllNPCs and selectedNPC then
        statusText = statusText .. "\n–í—ã–±—Ä–∞–Ω: " .. currentNPCIndex .. "/" .. #foundNPCs .. " " .. getNPCInfo(selectedNPC)
    end
    
    farmStatusLabel.Text = statusText
end

-- –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–Ω–æ–ø–∫–∏ —Ä–µ–∂–∏–º–∞ —Ñ–∞—Ä–º–∞
farmModeButton.MouseButton1Click:Connect(function()
    killAllNPCs = not killAllNPCs
    selectedNPC = nil
    currentNPCIndex = 1
    
    if killAllNPCs then
        farmModeButton.Text = "–†–µ–∂–∏–º: –í—Å–µ NPC"
        farmModeButton.BackgroundColor3 = Color3.fromRGB(76, 175, 80)
        print("üéØ –†–µ–∂–∏–º: –í—Å–µ NPC —Å –∏–º–µ–Ω–µ–º " .. CurrentNPCName)
    else
        farmModeButton.Text = "–†–µ–∂–∏–º: –û–¥–∏–Ω NPC"
        farmModeButton.BackgroundColor3 = Color3.fromRGB(33, 150, 243)
        print("üéØ –†–µ–∂–∏–º: –û–¥–∏–Ω NPC —Å –∏–º–µ–Ω–µ–º " .. CurrentNPCName)
        
        -- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–±–∏—Ä–∞–µ–º –ø–µ—Ä–≤–æ–≥–æ NPC –ø—Ä–∏ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–∏ –≤ —Ä–µ–∂–∏–º –æ–¥–Ω–æ–≥–æ
        if #foundNPCs > 0 then
            selectedNPC = foundNPCs[1]
            currentNPCIndex = 1
            print("‚úÖ –ê–≤—Ç–æ–≤—ã–±–æ—Ä NPC 1/" .. #foundNPCs .. ": " .. getNPCInfo(selectedNPC))
        end
    end
    updateFarmStatus()
end)

-- –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–Ω–æ–ø–∫–∏ –≤—ã–±–æ—Ä–∞ —Å–ª–µ–¥—É—é—â–µ–≥–æ NPC
selectNPCButton.MouseButton1Click:Connect(function()
    if killAllNPCs then
        print("‚ùå –°–Ω–∞—á–∞–ª–∞ –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç–µ—Å—å –≤ —Ä–µ–∂–∏–º '–û–¥–∏–Ω NPC'")
        return
    end
    
    if #foundNPCs == 0 then
        print("‚ùå –ù–µ—Ç –Ω–∞–π–¥–µ–Ω–Ω—ã—Ö NPC")
        return
    end
    
    -- –í—ã–±–∏—Ä–∞–µ–º —Å–ª–µ–¥—É—é—â–µ–≥–æ NPC
    selectNextNPC()
    updateFarmStatus()
end)

-- –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–Ω–æ–ø–∫–∏ —Ñ–∞—Ä–º–∞ NPC
farmButton.MouseButton1Click:Connect(function()
    npcFarmEnabled = not npcFarmEnabled
    
    if npcFarmEnabled then
        local npcName = npcSearchBox.Text
        if npcName == "" then
            npcName = "Jotaro Kujo"
            npcSearchBox.Text = npcName
        end
        
        CurrentNPCName = npcName
        farmButton.Text = "üõë –û–°–¢–ê–ù–û–í–ò–¢–¨"
        farmButton.BackgroundColor3 = Color3.fromRGB(244, 67, 54)
        
        -- –°–æ–∑–¥–∞–µ–º –ø–ª–∞—Ç—Ñ–æ—Ä–º—É –∏ –ø–æ–¥–Ω–∏–º–∞–µ–º –Ω–∞ 30
        createFarmPlatform()
        
        -- –°–±—Ä–∞—Å—ã–≤–∞–µ–º —Ç–∞–π–º–µ—Ä—ã
        lastGPressTime = tick()
        lastTPressTime = tick()
        lastXPressTime = tick()
        lastReturnTime = tick()
        
        print("üéØ –§–∞—Ä–º –∑–∞–ø—É—â–µ–Ω –¥–ª—è: " .. npcName)
        print("üîº –í—ã—Å–æ—Ç–∞: 30 –µ–¥–∏–Ω–∏—Ü")
        print("üö´ –ö–æ–ª–ª–∏–∑–∏—è –æ—Ç–∫–ª—é—á–µ–Ω–∞")
        print("üéØ –†–µ–∂–∏–º: " .. (killAllNPCs and "–í—Å–µ NPC" or "–û–¥–∏–Ω NPC"))
        
        if not killAllNPCs and #foundNPCs > 0 then
            if not selectedNPC then
                selectedNPC = foundNPCs[1]
                currentNPCIndex = 1
            end
            print("‚úÖ –í—ã–±—Ä–∞–Ω NPC " .. currentNPCIndex .. "/" .. #foundNPCs .. ": " .. getNPCInfo(selectedNPC))
        end
        
        print("üöÄ –ü–æ–ª—ë—Ç —Å–æ —Å–∫–æ—Ä–æ—Å—Ç—å—é: " .. returnSpeed)
        print("‚è±Ô∏è –ê–≤—Ç–æ-–≤–æ–∑–≤—Ä–∞—Ç –∫–∞–∂–¥—ã–µ 0.5 —Å–µ–∫—É–Ω–¥")
        print("üîí –ê–≤—Ç–æ-G: –∫–∞–∂–¥—ã–µ 25 —Å–µ–∫—É–Ω–¥ –Ω–∞ 3 —Å–µ–∫—É–Ω–¥—ã")
        print("‚ö° T –∏ X: –∫–∞–∂–¥—É—é —Å–µ–∫—É–Ω–¥—É")
        
        -- –ó–∞–ø—É—Å–∫–∞–µ–º –æ—Å–Ω–æ–≤–Ω–æ–π —Ü–∏–∫–ª
        if farmConnection then
            farmConnection:Disconnect()
        end
        
        farmConnection = RunService.Heartbeat:Connect(function()
            local currentTime = tick()
            
            -- –ü–æ–∏—Å–∫ NPC –∫–∞–∂–¥—ã–µ 3 —Å–µ–∫—É–Ω–¥—ã
            if currentTime - lastSearchTime > 3 then
                foundNPCs = findNPCs(CurrentNPCName)
                lastSearchTime = currentTime
                
                -- –ï—Å–ª–∏ —Ä–µ–∂–∏–º "–û–¥–∏–Ω NPC" –∏ –Ω–µ—Ç –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ, –≤—ã–±–∏—Ä–∞–µ–º –ø–µ—Ä–≤–æ–≥–æ
                if not killAllNPCs and not selectedNPC and #foundNPCs > 0 then
                    selectedNPC = foundNPCs[1]
                    currentNPCIndex = 1
                    print("‚úÖ –ê–≤—Ç–æ–≤—ã–±–æ—Ä NPC 1/" .. #foundNPCs .. ": " .. getNPCInfo(selectedNPC))
                end
                
                updateFarmStatus()
            end
            
            -- –¢–µ–ª–µ–ø–æ—Ä—Ç–∞—Ü–∏—è NPC
            teleportNPCsToPlayer()
            
            -- –ê–≤—Ç–æ-–∫–Ω–æ–ø–∫–∏
            handleAutoKeys()
            
            -- –ê–≤—Ç–æ-–≤–æ–∑–≤—Ä–∞—Ç –Ω–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—É—é –ø–æ–∑–∏—Ü–∏—é –∫–∞–∂–¥—ã–µ 0.5 —Å–µ–∫—É–Ω–¥—ã
            if currentTime - lastReturnTime >= 0.5 then
                smoothReturnToPosition()
                lastReturnTime = currentTime
            end
        end)
        
    else
        farmButton.Text = "üöÄ –ù–ê–ß–ê–¢–¨ –§–ê–†–ú"
        farmButton.BackgroundColor3 = Color3.fromRGB(76, 175, 80)
        
        -- –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –≤—Å–µ
        if farmConnection then
            farmConnection:Disconnect()
            farmConnection = nil
        end
        
        removeFarmPlatform()
        foundNPCs = {}
        
        print("üõë –§–∞—Ä–º –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω")
        print("‚úÖ –ö–æ–ª–ª–∏–∑–∏—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞")
    end
    
    updateFarmStatus()
end)

closeButton.MouseButton1Click:Connect(function()
    screenGui:Destroy()
    enabled = false
    npcFarmEnabled = false
    
    if farmPlatform then
        farmPlatform:Destroy()
    end
    if platformFollowConnection then
        platformFollowConnection:Disconnect()
    end
    if farmConnection then
        farmConnection:Disconnect()
    end
    if positionSaveConnection then
        positionSaveConnection:Disconnect()
    end
    
    -- –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∫–æ–ª–ª–∏–∑–∏—é –ø—Ä–∏ –∑–∞–∫—Ä—ã—Ç–∏–∏
    restoreCollision()
    
    print("‚ùå RePoz GUI –∑–∞–∫—Ä—ã—Ç")
end)

-- –î–æ–±–∞–≤–ª—è–µ–º GUI –≤ –∏–≥—Ä–æ–∫–∞
screenGui.Parent = player.PlayerGui

-- –¶–∏–∫–ª—ã –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
RunService.Heartbeat:Connect(function()
    ultraDenseTeleport()
    updateSpeedSystem()
    updateInfiniteJump()
    updateJumpSystem()
    
    -- –ó–ê–©–ò–¢–ê –û–¢ –£–†–û–ù–ê
    local character = player.Character
    if character then
        local humanoid = character:FindFirstChildOfClass("Humanoid")
        if humanoid then
            if humanoid.Health < humanoid.MaxHealth then
                humanoid.Health = humanoid.MaxHealth
            end
        end
    end
end)

print("‚úÖ RePoz –ø–æ–ª–Ω–æ—Å—Ç—å—é –∑–∞–≥—Ä—É–∂–µ–Ω!")
print("üéØ NPC Farmer –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω –≤–æ –≤–∫–ª–∞–¥–∫—É –§–∞—Ä–º!")
print("üîº –í—ã—Å–æ—Ç–∞ –ø–æ–¥–Ω—è—Ç–∏—è: 30 –µ–¥–∏–Ω–∏—Ü")
print("üö´ –ö–æ–ª–ª–∏–∑–∏—è –æ—Ç–∫–ª—é—á–∞–µ—Ç—Å—è –ø—Ä–∏ —Ñ–∞—Ä–º–µ")
print("üéØ –†–µ–∂–∏–º—ã: –í—Å–µ NPC –∏–ª–∏ –≤—ã–±–æ—Ä –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ")
print("üîÑ –ö–Ω–æ–ø–∫–∞ '–°–ª–µ–¥—É—é—â–∏–π NPC' –¥–ª—è –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –º–µ–∂–¥—É NPC")
print("üîí –ê–≤—Ç–æ-G: –∫–∞–∂–¥—ã–µ 25 —Å–µ–∫—É–Ω–¥ –Ω–∞ 3 —Å–µ–∫—É–Ω–¥—ã")
print("‚ö° T –∏ X: –∫–∞–∂–¥—É—é —Å–µ–∫—É–Ω–¥—É")
print("üéØ –í —Ä–µ–∂–∏–º–µ –æ–¥–Ω–æ–≥–æ NPC –≤—Å–µ–≥–¥–∞ –≤—ã–±–∏—Ä–∞–µ—Ç—Å—è —Ç–æ—Ç –∂–µ NPC, –∫–æ—Ç–æ—Ä–æ–≥–æ –≤—ã —É–±–∏–≤–∞–ª–∏ –¥–æ —ç—Ç–æ–≥–æ")
print("üöÄ –£–ª—É—á—à–µ–Ω–Ω—ã–π –∞–≤—Ç–æ-–≤–æ–∑–≤—Ä–∞—Ç (BodyPosition)")
print("‚è±Ô∏è –ê–≤—Ç–æ-–≤–æ–∑–≤—Ä–∞—Ç –∫–∞–∂–¥—ã–µ 0.5 —Å–µ–∫—É–Ω–¥")
